# E2E тесты для проекта

## Описание
E2E тесты написаны с использованием Playwright для тестирования веб-приложения.

## Структура
```
tests/
├── pages/          # Page Object модели
│   └── LoginPage.ts
├── mocks/          # API моки
│   └── apiMocks.ts
├── health.spec.ts  # Тесты доступности
├── login.spec.ts   # Тесты авторизации
└── README.md       # Этот файл
```

## Запуск тестов

### Предварительные требования
1. Установить Node.js (версия 18+)
2. Установить зависимости: `npm install`
3. Установить браузеры: `npm run test:e2e:install`

### Команды для запуска

```bash
# Все тесты
npm run test:e2e

# Тесты с UI интерфейсом
npm run test:e2e:ui

# Тесты в headed режиме (с видимыми браузерами)
npm run test:e2e:headed

# Показать HTML отчет
npm run test:e2e:report

# Тесты с Allure отчетом
npm run test:e2e:allure

# Сгенерировать Allure отчет
npm run test:e2e:allure:generate

# Открыть Allure отчет
npm run test:e2e:allure:open
```

## Особенности тестов

### API Моки
Тесты используют `page.route()` для мокирования API ответов:
- **Статус пользователя** - проверка регистрации
- **Авторизация** - успешная/неуспешная авторизация
- **Регистрация** - успешная регистрация и ошибки
- **Профиль** - статусы по возрасту (UwU, молоденький котик, старый котик)

### Адаптация к недоступному сайту
Тесты адаптированы для работы с недоступным сайтом yavshok.ru:
- Используют fallback HTML контент
- Обрабатывают ошибки подключения
- Проверяют как реальные, так и мокированные ответы

### Page Object Pattern
Используется Page Object паттерн для лучшей организации кода:
- Инкапсуляция селекторов
- Переиспользование методов
- Легкость поддержки

## Добавление новых тестов

1. Создайте Page Object в папке `pages/`
2. Добавьте API моки в `mocks/apiMocks.ts` при необходимости
3. Создайте тестовый файл `*.spec.ts`
4. Используйте общие test-id из `src/shared/testing/index.ts`

## Конфигурация
Основная конфигурация находится в `playwright.config.ts` в корне проекта. 